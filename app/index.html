<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>hello-backbonejs</title>
  <script type="text/javascript" src="js/lib/jquery.min.js"></script>
  <script type="text/javascript" src="js/lib/require.js"></script>
  <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.1.1/css/bootstrap.min.css">
</head>
<body>
	<div class="container">
	<h1>User Manager</h1>
	<hr/>
	<div class="page"></div>
	</div>
	

	
   <script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.2/underscore-min.js" type="text/javascript"></script>
   <script src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min.js"></script>
   <script type="text/javascript" src="js/main.js"></script>
   
   	<script type='text/template' id="user-list-template">
		<h4>Templing</h4>
	</script>
   <script>
   
		 $.ajaxPrefilter( function( options, originalOptions, jqXHR ) {
      options.url = 'http://backbonejs-beginner.herokuapp.com' + options.url;
    });
		var Users=Backbone.Collection.extend({
			url:'/users'
		});
		var UserList=Backbone.View.extend({
			el:'.page',
			render:function(){
				var that=this;
				var users=new Users();
				console.log(users.models);
				users.fetch({
					success:function(users){
						var template=_.template($('#user-list-template').html(),{users: users.models});
						that.$el.html(template);
					}
				})
			}
		});
		
		var Router =Backbone.Router.extend({
			routes:{
				'':'home'
				
			}
		});
		
		var userList=new UserList();
			var router =new Router(); 
			router.on('route:home',function(){ // listen on the route
				userList.render();
			}); 
			
			Backbone.history.start();
   </script>
</body>
</html>
